<%- include('../partials/navbar') %>

<div class="container mx-auto my-10">
  <h1 class="text-4xl font-bold mb-8 text-gray-800"><%= title %></h1>

  <% if (success_msg && success_msg.length > 0) { %>
    <div class="flash-success flash-message"><%= success_msg %></div>
  <% } %>
  <% if (error_msg && error_msg.length > 0) { %>
    <div class="flash-error flash-message"><%= error_msg %></div>
  <% } %>

  <% if(orders.length === 0) { %>
    <p class="text-gray-700">You have not placed any orders yet. <a href="/products" class="text-blue-600 hover:text-blue-800 font-semibold">Start shopping!</a></p>
  <% } else { %>
    <div class="overflow-x-auto">
      <table class="order-history-table w-full table-auto">
        <thead>
          <tr>
            <th class="px-4 py-3 text-left">Order ID</th>
            <th class="px-4 py-3 text-left">Total Amount</th>
            <th class="px-4 py-3 text-left">Status</th>
            <th class="px-4 py-3 text-left">Placed On</th>
            </tr>
        </thead>
        <tbody>
          <% orders.forEach(order => { %>
            <tr class="border-b">
              <td class="px-4 py-4 font-mono text-sm text-gray-500">#<%= order.order_id %></td>
              <td class="px-4 py-4 font-semibold price-display">$<%= order.total_amount.toFixed(2) %></td>
              <td class="px-4 py-4">
                  <span class="font-bold <%= order.status === 'pending' ? 'text-orange-500' : 'text-green-600' %>">
                      <%= order.status.toUpperCase() %>
                  </span>
              </td>
              <td class="px-4 py-4 text-gray-700">
                <%= order.created_at.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) %>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } %>

  <div class="mt-8">
    <a href="/products" class="bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-blue-700 transition duration-300">
        Continue Shopping
    </a>
  </div>
</div>

<%- include('../partials/footer') %>